<div id="fb-root"></div>

<script>

  window.fbAsyncInit = function() {
  		//Initialize the Facebook JavaScript SDK
  		FB.init({
  			appId : '1662230064025382', //App ID from the app dashboard
  			channelUrl : 'http://bestbroccoli.com/pages/channel.html', //Channel file for x-domain communication
  			status : true, //Check Facebook Login status
  			xfbml : true //Look for social plugins on the page
  		});

  		//Logged In Users
  		FB.getLoginStatus(function(response) {
  			if (response.status !== "unknown") {
  				ga('set', 'dimension1', 'Logged In');
  			}
  		});

  		//Facebook Likes
  		FB.Event.subscribe('edge.create', function(href, widget) {
  			var currentPage = jQuery(document).attr('title');
  			ga('send', {
  				'hitType': 'social',
  				'socialNetwork': 'Facebook',
  				'socialAction': 'Like',
  				'socialTarget': href,
  				'page': currentPage
  			});
  		});

  		//Facebook Unlikes
  		FB.Event.subscribe('edge.remove', function(href, widget) {
  			var currentPage = jQuery(document).attr('title');
  			ga('send', {
  				'hitType': 'social',
  				'socialNetwork': 'Facebook',
  				'socialAction': 'Unlike',
  				'socialTarget': href,
  				'page': currentPage
  			});
  		});

  		//Facebook Send/Share
  		FB.Event.subscribe('message.send', function(href, widget) {
  			var currentPage = jQuery(document).attr('title');
  			ga('send', {
  				'hitType': 'social',
  				'socialNetwork': 'Facebook',
  				'socialAction': 'Send',
  				'socialTarget': href,
  				'page': currentPage
  			});
  		});

  		//Facebook Comments
  		FB.Event.subscribe('comment.create', function(href, widget) {
  			var currentPage = jQuery(document).attr('title');
  			ga('send', {
  				'hitType': 'social',
  				'socialNetwork': 'Facebook',
  				'socialAction': 'Comment',
  				'socialTarget': href,
  				'page': currentPage
  			});
  		});
  	};

  //Load the SDK
  (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

</script>
